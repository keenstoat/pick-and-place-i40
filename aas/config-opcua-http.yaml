---
interval: &interval 300
core:
  assetConnectionRetryInterval: 1000

endpoints:
  - "@class": de.fraunhofer.iosb.ilt.faaast.service.endpoint.opcua.OpcUaEndpoint
    discoveryServerUrl: opc.tcp://localhost:4840

assetConnections:
  - "@class": de.fraunhofer.iosb.ilt.faaast.service.assetconnection.http.HttpAssetConnection
    baseUrl: http://localhost:8080 # this should ONLY be modified by setting the 'faaast_config_extension_assetConnections[0]_baseUrl' env variable
    
    valueProviders:
      "[ModelRef](Submodel)OperationalData, (Property)isModuleInitialized": 
        format: JSON
        path: /OperationalData/isModuleInitialized
        query: $.data
      "[ModelRef](Submodel)OperationalData, (Property)isModuleBusy": 
        format: JSON
        path: /OperationalData/isModuleBusy
        query: $.data
      "[ModelRef](Submodel)OperationalData, (Property)robotSpeed": 
        format: JSON
        path: /OperationalData/robotSpeed
        template: '{"data": ${value} }' 
        writeMethod: "POST"
        query: $.data
      "[ModelRef](Submodel)OperationalData, (Property)tableDistance": 
        format: JSON
        path: /OperationalData/tableDistance
        template: '{"data": ${value} }' 
        writeMethod: "POST"
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)x": 
        format: JSON
        path: /OperationalData/robotPosition/x
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)y":
        format: JSON
        path: /OperationalData/robotPosition/y
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)z":
        format: JSON
        path: /OperationalData/robotPosition/z
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)gripperPosition, (Property)opening": 
        format: JSON
        path: /OperationalData/gripperPosition/opening
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)gripperPosition, (Property)rotation": 
        format: JSON
        path: /OperationalData/gripperPosition/rotation
        query: $.data
    
    subscriptionProviders:
      # "[ModelRef](Submodel)OperationalData, (Property)isModuleInitialized": 
      #   format: JSON
      #   path: /OperationalData/isModuleInitialized
      #   interval: *interval
      #   query: $.data
      "[ModelRef](Submodel)OperationalData, (Property)isModuleBusy":
        format: JSON
        path: /OperationalData/isModuleBusy
        interval: *interval
        query: $.data
      "[ModelRef](Submodel)OperationalData, (Property)robotSpeed": 
        format: JSON
        path: /OperationalData/robotSpeed
        interval: *interval
        query: $.data
      # "[ModelRef](Submodel)OperationalData, (Property)tableDistance": 
      #   format: JSON
      #   path: /OperationalData/tableDistance
      #   interval: *interval
      #   query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)x":
        format: JSON
        path: /OperationalData/robotPosition/x
        interval: *interval
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)y":
        format: JSON
        path: /OperationalData/robotPosition/y
        interval: *interval
        query: $.data
      "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)robotPosition, (Property)z":
        format: JSON
        path: /OperationalData/robotPosition/z
        interval: *interval
        query: $.data
      # "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)gripperPosition, (Property)opening": 
      #   format: JSON
      #   path: /OperationalData/gripperPosition/opening
      #   interval: *interval
      #   query: $.data
      # "[ModelRef](Submodel)OperationalData, (SubmodelElementCollection)gripperPosition, (Property)rotation": 
      #   format: JSON
      #   path: /OperationalData/gripperPosition/rotation
      #   interval: *interval
      #   query: $.data
    
    operationProviders:

      "[ModelRef](Submodel)OperationalData, (Operation)initializeModule":
        format: JSON
        path: /OperationalData/initializeModule
        method: POST
        template: ''
        queries:
          result: $.data
      "[ModelRef](Submodel)OperationalData, (Operation)moveRobot":
        format: JSON
        path: /OperationalData/moveRobot
        method: POST
        template: '{"data": {"x": ${x}, "y": ${y}, "z": ${z}, "speed": ${speed} }}'
        queries:
          result: $.data
      "[ModelRef](Submodel)OperationalData, (Operation)moveGripper":
        format: JSON
        path: /OperationalData/moveGripper
        method: POST
        template: '{"data": {"opening": ${opening}, "rotation": ${rotation} }}'
        queries:
          result: $.data
      "[ModelRef](Submodel)OperationalData, (Operation)pickAndPlace":
        format: JSON
        path: /OperationalData/pickAndPlace
        method: POST
        template: |
          {"data": {
            "xInitial": ${xInitial}, "yInitial": ${yInitial}, 
            "xFinal": ${xFinal}, "yFinal": ${yFinal}, 
            "objectWidth": ${objectWidth}, "objectHeight": ${objectHeight}
          }}
        queries:
          result: $.data
